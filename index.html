<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Dscourse as Add on </title>

    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="dscourse/dscourse.css" rel="stylesheet">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="container ">

        <div class="row">
            <div class="col-xs-12">
                <h1> Welcome to dscourse</h1>
                <p class="lead"> This is the new add on version of dscourse which you can embed more easily into your existing online environments</p>
            </div>
        </div>


       <div id="dscourse"></div>


        </div>

    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
    <script src="js/jquery-ui-1.10.4.min.js"></script>
  
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="js/bootstrap.min.js"></script>

    <!-- Dscourse specific files -->
    <script src="http://d3js.org/d3.v3.min.js" charset="utf-8"></script>
    <script src="dscourse/plugins/jquery.scrollTo-min.js"></script>
    <script src="dscourse/plugins/timeago.jquery.js"></script>
    <script src="dscourse/plugins/jqbrowser.js"></script>
    <script src="dscourse/dscourse.js"></script>
    
    <script>
        var sampleData = "{\"chartType\": \"BarChart\",\"areaOpacity\": \".3\",\"backgroundColor\": \"\",\"chartArea\": \"\",\"colors\": \"\",\"fontName\": \"Arial\",\"fontSize\": \"automatic\",\"hAxis\": \"\",\"legend\": \"right\",\"legendTextStyle\": \"\",\"height\": \"400\",\"isStacked\": \"true\",\"lineWidth\": \"2\",\"pointSize\": \"7\",\"series\": \"\",\"title\": \"\",\"titleTextStyle\": \"\",\"tooltipTextStyle\": \"\", \"vAxis\": \"\",\"width\": \"600\", \"dataSourceUrl\": \"https://docs.google.com/spreadsheet/pub?hl=en_US&hl=en_US&key=0AsMQEd_YoBWldHZNbGU2czNfa004UmpzeC13MkZZb0E&output=html\",\"query\": \"\",\"shivaGroup\": \"Visualization\"}";
        var dscourse;
        $(document).ready(function(){

          // SHIVA Tools
          if (window.addEventListener){
              window.addEventListener("message", shivaMessageHandler, false);
          } else {
              window.attachEvent("message", shivaMessageHandler);
          }
          dscourse = new Dscourse();

      });

        function ShivaMessage (iFrameName, cmd) {
            if (cmd.indexOf("PutJSON") == 0)
                console.log(dscourse.currentDrawData);
            cmd += "=" + dscourse.currentDrawData;
            document.getElementById(iFrameName).contentWindow.postMessage(cmd, "*");
        }

        function shivaMessageHandler (e) {
            var msg = "Unrecognized";
            if (e.data.indexOf("GetJSON=") == 0)
                msg = e.data.substr(8);
            else if (e.data.indexOf("GetType=") == 0)
                msg = e.data.substr(8);
            dscourse.currentDrawing = msg;
            console.log(dscourse.currentDrawing);
        }



    </script> 

  </body>
</html>